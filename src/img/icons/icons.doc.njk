{% extends 'docs/extends/base.njk' %}

{% block additionalCSS %}
	<style>
		svg[class*=icon-] {
			width: 100%;
			max-height: 100%;
		}
	</style>
{% endblock %}

{% block main %}
		<h1>yourproject-icons</h1>

		<ul class="l__icons il-grid v_space" id="icons">
			
				<li class="i__icons ">
					<svg class="icon-home">
						<use xlink:href="{{ templates_path }}img/icons-sprite.svg#book" />	
					</svg>
					<!-- <label for="icon-home" class="h1 icon-home"></label> -->
					<!-- <input class="small" type="text" id="icon-home" value="icon-home" /> -->
				</li>
			
		</ul>

		

		<h2>Usage</h2>
		<pre><code>&lt;i class=&quot;icon-<span id="name">name</span>&quot;&gt;&lt;/i&gt;</code></pre>
		

		<footer>
			<p>
				Font icon are generated with <a href="https://github.com/sapegin/grunt-webfont">grunt-webfont</a>.				
			</p>
		</footer>

{% endblock %}



{% block additionalJS %}
	<script>
		const parseSVG = file => {
			const parser = new DOMParser();
			return parser.parseFromString(file, "image/svg+xml");
		};

		const getSVGsprite = () => {
			fetch('{{ templates_path }}img/icons-sprite.svg')
				.then( response => {
					// console.log(response);
					// console.log(response.text());
					return response.text();
				})
				.then( svg => {
					const parsedSVG = parseSVG(svg);
					console.log(parsedSVG); 
					const symbols = parsedSVG.getElementsByTagName("symbol");
					console.log(symbols);

					// Array.prototype.forEach.call(symbols, function(el, i){
					// 	console.log(el, i);
					// });

					let htmlPreview = "";

					for(const el of symbols) {

						htmlPreview += `
							<li class="i__icons ">
								<svg class="icon-home">
									<use xlink:href="{{ templates_path }}img/icons-sprite.svg#${el.id}" />	
								</svg>
								<p>${el.id}</p>
							</li>
						`;
					}

					document.getElementById("icons").innerHTML = htmlPreview;
				})
				.catch(error => console.error('Error', error)
			);
		};



		getSVGsprite()	
	</script>
{% endblock %}
